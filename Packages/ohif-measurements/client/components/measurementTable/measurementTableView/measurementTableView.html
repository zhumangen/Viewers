<template name="measurementTableView">
    <div class="measurementTableView scrollArea">
        {{#let config=measurementConfiguration}}
        {{#let newMeasurementType=(getNewMeasurementType config.newMeasurementTool)}}
        
            {{#each measurementType in config.measurementTools}}
                {{#if measurementType.options.showInMeasurementTable}}
                    {{#let collection=(groupByMeasurementNumber measurementType newMeasurementType)}}
                        {{>measurementTableHeaderRow
                            measurementType=measurementType
                            measurements=collection
                            currentTimepointId=currentTimepointId
                            timepointApi=timepointApi
                            measurementApi=measurementApi}}

                        {{#each entry in collection}}
                            {{>measurementTableRow (clone this rowItem=entry)}}
                        {{/each}}
                    {{/let}}
                {{/if}}
            {{/each}}

            {{#if config.newMeasurementTool}}
                {{#let newMeasure=(newMeasurements newMeasurementType)}}
                    {{#if newMeasure.length}}
                        {{#let collection=newMeasure}}
                            {{>measurementTableHeaderRow
                                measurementType=newMeasurementType
                                measurements=collection
                                currentTimepointId=currentTimepointId
                                timepointApi=timepointApi
                                measurementApi=measurementApi}}

                            {{#each entry in collection}}
                                {{>measurementTableRow (clone this rowItem=entry)}}
                            {{/each}}
                        {{/let}}
                    {{/if}}
                {{/let}}
            {{/if}}

        {{/let}}
        {{/let}}
    </div>
</template>
